import{r,j as e,c as u}from"./chunk-d2ef2266.js";import{A as m,g as f,a0 as g,aA as h,B as p,aa as v,aB as w}from"./chunk-0e994386.js";import{m as x}from"./chunk-8eed5aa2.js";import"./chunk-23102255.js";var b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const j=b;var y=function(n,s){return r.createElement(m,f({},n,{ref:s,icon:j}))},R=r.forwardRef(y);const A=R,L=()=>{const[c,n]=r.useState(!1),[s,O]=r.useState({ZingMp3:!0}),l=()=>{n(!0),chrome.tabs.query({active:!0,currentWindow:!0},t=>{chrome.scripting.executeScript({target:{tabId:t[0].id},args:[],func:function(){const o=document.querySelectorAll("audio"),a=(o.length>0?Array.from(o):[]).filter(d=>d.hasAttribute("src"))[0];chrome.runtime.sendMessage({type:"FetchingMediaSource",src:a.src,pageURL:location.href})}})})};return r.useEffect(()=>{x.listener(async t=>{if(t.type==="SendAudioProfile"){const o=await(await fetch(t.sourceURL)).blob(),i=URL.createObjectURL(o),a=document.createElement("a");a.setAttribute("download",t.filename),a.setAttribute("target","_blank"),a.href=i,a.click(),URL.revokeObjectURL(i),a.remove(),n(!1)}}),chrome.tabs.query({active:!0,currentWindow:!0},t=>{console.log("url: ",t[0].url)})},[]),e.jsx(g,{theme:{components:{Button:(()=>{const t=new w("#61dafb");return{defaultHoverBg:t.withOpacity(.2),defaultActiveBg:t.withOpacity(.25),colorBorder:t.withOpacity(.85)}})()}},children:e.jsx("div",{className:"py-4 rounded",style:{backgroundColor:h.dracula.val},children:s.ZingMp3?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-between px-4 items-center py-2 download-item",children:[e.jsxs("div",{className:"text-base",children:[e.jsx("b",{children:"[Zing]"})," Donwload current song"]}),e.jsx(p,{onClick:l,disabled:c,type:"default",className:"bg-transparent",icon:c?e.jsx(v,{}):e.jsx(A,{})})]})}):e.jsx(e.Fragment,{})})})};u.createRoot(document.getElementById("app")).render(e.jsx(L,{}));
